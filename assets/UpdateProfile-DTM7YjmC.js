import{u as b,r as h,a as v,j as e}from"./index-B_vNNcwE.js";import{F as s,v as w,U as C}from"./Users-7gicyVFj.js";import{C as u}from"./Card-Doi8-XFl.js";import{A as N,B as y}from"./Button-BZz-WWSE.js";const L=n=>{let t=n.replace(/\D/g,"");return t.length===11&&t.startsWith("0")&&(t="+92"+t.substring(1)),t},E=()=>{const{currentUser:n,updateUser:t}=b(),[x,o]=h.useState(!1),[p,l]=h.useState(""),f=v(),[r,j]=h.useState({name:n.name,email:n.email,phone:n.phone,password:""}),i=m=>{const{name:a,value:d}=m.target;j({...r,[a]:d})},g=async m=>{try{m.preventDefault(),o(!0),l("");let a=null;if(r.name!==n.name&&(a={...a,name:r.name}),r.email!==n.email&&(a={...a,email:r.email}),r.phone!==n.phone&&(a={...a,phone:L(r.phone)}),r.password!==""&&(a={...a,password:r.password}),!a)return o(!1),l("Nothing has been changed");const{validationError:d}=await w(C,a);if(d)return o(!1),l(d);const c=await t(a);return c?(o(!1),l(c)):(o(!1),f("/"))}catch(a){console.error(a)}};return e.jsx(e.Fragment,{children:e.jsx(u,{children:e.jsxs(u.Body,{children:[e.jsx("h2",{className:"text-center mb-4",children:"Update Profile"}),p&&e.jsx(N,{variant:"danger",children:p}),e.jsxs(s,{onSubmit:g,children:[e.jsxs(s.Group,{id:"name",children:[e.jsx(s.Label,{children:"Name"}),e.jsx(s.Control,{type:"text",name:"name",onChange:i,value:r.name})]}),e.jsxs(s.Group,{id:"email",children:[e.jsx(s.Label,{children:"Email"}),e.jsx(s.Control,{type:"text",name:"email",onChange:i,value:r.email})]}),e.jsxs(s.Group,{id:"phone",children:[e.jsx(s.Label,{children:"Phone Number"}),e.jsx(s.Control,{name:"phone",onChange:i,value:r.phone,placeholder:"Leave blank to keep same"})]}),e.jsxs(s.Group,{id:"password",children:[e.jsx(s.Label,{children:"New Password"}),e.jsx(s.Control,{type:"password",name:"password",onChange:i,value:r.password,placeholder:"Leave blank to keep same"})]}),e.jsx(y,{disabled:x,className:"w-100 mt-4",type:"submit",children:"Update Profile"})]})]})})})};export{E as default};
